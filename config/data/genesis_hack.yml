- Store :
    - email : b@c.de
    - firstName : b
    - lastName : c
    - password : 12345678
    - address : fuso
    - url : https://dev01.lab04b.dw.demandware.net/s/SiteGenesis
    - urlsec : https://dev01.lab04b.dw.demandware.net/s/SiteGenesis
    - logoutUrl : https://dev01.lab04b.dw.demandware.net/on/demandware.store/Sites-SiteGenesis-Site/en_US/Login-Logout
    
- Action :
    Name : Go to product
    Request :
        Url : ${url}/electronics/digital%20cameras/nikon-p6000.html
    Response :
        Validate :  
            - Validate Name :
                XPath : "//*[@id='pdpMain']/div[2]/h1"
                Text : "Nikon Coolpix P6000 Digital Point and Shoot Camera"
            - Validate Price : 
                XPath : "//*[@id='product-content']/div[4]/span"
                Text : "$399.99"                               
    Subrequests :
        - Xhr :
            Name : Add product to cart
            Request :
                Method : POST
                Url : http://dev01.lab04b.dw.demandware.net/on/demandware.store/Sites-SiteGenesis-Site/en_US/Cart-AddProduct?format=ajax                
                Encode-Parameters : false
                Parameters : 
                    - dwopt_nikon-p6000_digitalCameraWarranty : "001"
                    - Quantity : 1
                    - uuid :
                    - cartAction : update
                    - pid : nikon-p6000
                    
- Action :
    Name : View Cart
    Request :
        Url : ${url}/cart
    Response :
        Validate :
            - Validate Price :
                XPath : "//*[@id='cart-items-form']/fieldset/div/div[1]/table/tbody/tr[4]/td[2]"
                Text : "$430.48"
            - Validate Product id:
                XPath : "//*[@id='cart-table']/tbody/tr/td[2]/div[1]/div[2]/span[2]"
                Text : "nikon-p6000"
        Store :
            - checkoutLink :
                XPath : "//*[@id='checkout-form']/@action" 
                
- Action :
    Name : Go to Checkout
    Request :
        Url : ${checkoutLink}
        Method : POST
        Encode-Parameters : false
        Parameters :
            - dwfrm_cart_checkoutCart : Checkout
    Response :
        Validate :
            - Validate Email form :
                XPath : "//*[@id='dwfrm_login']/fieldset/div[1]/label/span[2]"
                Text : Email Address
            - Validate Pasword form :
                XPath : "//*[@id='dwfrm_login']/fieldset/div[3]/button"
                Matches : Login   
        Store :
            - loginUrl :
                XPath : "//*[@id='dwfrm_login']/@action"
            - secureKey :
                XPath : "//*[@id='dwfrm_login']/fieldset/input/@value"
            - userParameterName : 
                XPath : "//*[@id='dwfrm_login']/fieldset/div[1]/label/@for"

- Action :
    Name : Login
    Request :
        Url : ${loginUrl}
        Method : POST
        Encode-Parameters : false
        Parameters :
            - ${userParameterName} : ${email}
            - dwfrm_login_password : ${password}
            - dwfrm_login_login : Login
            - dwfrm_login_securekey : ${secureKey} 
            
- Action :
    Name : Go to shipping address form
    Request :
        Url : https://dev01.lab04b.dw.demandware.net/s/SiteGenesis/shipping
    Response :
        Validate :
            - Validate Price :
                XPath : "//*[@id='secondary']/div[4]/table/tbody/tr[4]/td[2]"
                Text : "$430.48"
            - Validate form title :
                XPath : "//*[@id='dwfrm_singleshipping_shippingAddress']/fieldset[1]/legend"
                Matches : "Select or Enter a Shipping Address"
            - Validate form :
                XPath : "//*[@id='dwfrm_singleshipping_shippingAddress']/fieldset[1]/div[1]/label/span[2]"
                Text: "First Name"
        Store:
            - linkShipping :
                XPath : "//*[@id='dwfrm_singleshipping_shippingAddress']/@action"
            - secureKeyShipping : 
                XPath : "//*[@id='dwfrm_singleshipping_shippingAddress']/fieldset[2]/input/@value"

- Action :
    Name : Send Shipping data
    Request :
        Url : ${linkShipping}
        Method : POST
        Encode-Parameters : false
        Parameters :
            - dwfrm_singleshipping_shippingAddress_addressFields_firstName : ${firstName}
            - dwfrm_singleshipping_shippingAddress_addressFields_lastName : ${lastName}
            - dwfrm_singleshipping_shippingAddress_addressFields_address1 : ${address}
            - dwfrm_singleshipping_shippingAddress_addressFields_address2 : ${address}
            - dwfrm_singleshipping_shippingAddress_addressFields_country : "DE"
            - dwfrm_singleshipping_shippingAddress_addressFields_states_state : "OTHER"
            - dwfrm_singleshipping_shippingAddress_addressFields_city : "jena"
            - dwfrm_singleshipping_shippingAddress_addressFields_postal : "07747"
            - dwfrm_singleshipping_shippingAddress_addressFields_phone : "2143133924"
            - dwfrm_singleshipping_shippingAddress_isGift : false
            - dwfrm_singleshipping_shippingAddress_giftMessage :
            - dwfrm_singleshipping_shippingAddress_shippingMethodID : "001"
            - dwfrm_singleshipping_shippingAddress_save : "Continue >"
            - dwfrm_singleshipping_securekey : ${secureKeyShipping} 
    Response :
        Validate :
            - Validate Price:
                XPath : "//*[@id='secondary']/div[4]/table/tbody/tr[4]/td[2]"
                Text : "$450.98"
            - Validate Title:
                XPath : "//*[@id='dwfrm_billing']/fieldset[1]/legend"
                Matches : "Select or Enter a Billing Address"
                
        Store :
            - billingUrl :
                XPath : "//*[@id='dwfrm_billing']/@action"
            - secureKeyBilling :
                XPath : "//*[@id='dwfrm_billing']/fieldset[2]/input/@value"
            - dwcont :
                RegEx : "C[\\d]+"                          
                
- Action :
    Name : Send Billing Data
    Request :
        Url : ${billingUrl}
        Method : POST
        Cookies :
            - dw : 1
            - dw_cookies_accepted : 1
        Encode-Parameters : false
        Headers:
            - Accept : "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8"
            - Accept-Encoding : "gzip, deflate"
            - Accept-Language : "en-US,en;q=0.8"
            - Cache-Control : "no-cache"
            - Connection : "keep-alive"
            - Content-Type : "application/x-www-form-urlencoded"
            - DNT : 1
            - Host : "dev01.lab04b.dw.demandware.net"
            - Origin : "https://dev01.lab04b.dw.demandware.net"
            - Pragma : "no-cache"
            - Referer : ${linkShipping}
        Parameters :
            - dwfrm_billing_save : "true"
            - dwfrm_billing_billingAddress_addressFields_firstName : "b"
            - dwfrm_billing_billingAddress_addressFields_lastName : "c"
            - dwfrm_billing_billingAddress_addressFields_address1 : "bc"
            - dwfrm_billing_billingAddress_addressFields_address2 : "bc"
            - dwfrm_billing_billingAddress_addressFields_country : "DE"
            - dwfrm_billing_billingAddress_addressFields_states_state : "OTHER"
            - dwfrm_billing_billingAddress_addressFields_city : "jena"
            - dwfrm_billing_billingAddress_addressFields_postal : "07747"
            - dwfrm_billing_billingAddress_addressFields_phone : "175747574757"
            - dwfrm_billing_billingAddress_email_emailAddress : "b@c.de"
            - dwfrm_billing_securekey : ${secureKeyBilling}
            - dwfrm_billing_couponCode :
            - dwfrm_billing_giftCertCode :
            - dwfrm_billing_paymentMethods_selectedPaymentMethodID : "CREDIT_CARD"
            - dwfrm_billing_paymentMethods_creditCard_owner : "b c"
            - dwfrm_billing_paymentMethods_creditCard_type : "Visa"
            - dwfrm_billing_paymentMethods_creditCard_number : "4111111111111111"
            - dwfrm_billing_paymentMethods_creditCard_month : "3"
            - dwfrm_billing_paymentMethods_creditCard_year : "2016"
            - dwfrm_billing_paymentMethods_creditCard_cvn : 345
            - dwfrm_billing_paymentMethods_creditCard_saveCard : "true"
            - dwfrm_billing_paymentMethods_bml_year : 
            - dwfrm_billing_paymentMethods_bml_month : 
            - dwfrm_billing_paymentMethods_bml_day : 
            - dwfrm_billing_paymentMethods_bml_ssn : 
            - dwfrm_billing_save : "Continue >"

- Action :
    Name : Go to Order Overview
    Request :
        Url : https://dev01.lab04b.dw.demandware.net/s/SiteGenesis/revieworder
    Response :
        Validate :
            - Validate Button:
                XPath: "//*[@id='primary']/div[2]/form/fieldset/div/button"
                Matches : "Place Order"
            - Validate Price :
                XPath : "//*[@id='primary']/div[2]/div/table/tbody/tr[4]/td[2]"
                Text : "$450.98"