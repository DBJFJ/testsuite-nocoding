package com.xceptance.xlt.common.tests;

import org.junit.Test;

import com.xceptance.xlt.api.actions.AbstractHtmlPageAction;
import com.xceptance.xlt.common.actions.SimpleURL;
import com.xceptance.xlt.common.util.CSVBasedURLAction;

/**
 * This is a simple single URL test case. It can be used to create considerable load for simple investigations. Cookie
 * handling, as well as content comparison is handled automatically. See the properties too.
 */
public class TURL extends AbstractURLTestCase
{
    @Test
    public void testURLs() throws Throwable
    {
        final String a = getProperty("foo");
        
        // our action tracker to build up a correct chain of pages
        AbstractHtmlPageAction lastAction = null; 
            
        // let's loop about the data we have
        for (final CSVBasedURLAction csvBasedAction : csvBasedActions)
        {
            if (lastAction == null)
            {
                // our first action, so start the browser too
                lastAction = new SimpleURL(csvBasedAction, login, password);
            }
            else
            {
                // subsequent actions
                lastAction = new SimpleURL(lastAction, csvBasedAction);
            }
            
            // run it
            lastAction.run();
        }
    }
}
